<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capture Study</title>
</head>

<body>
    <!-- <input id="file-input" type="file" accept="image/*"> -->
    <canvas id="output" style="border:1px solid #000000;"></canvas>
    <!-- <img id="source" src="stop.png" style="display: block;" width="400" height="400"> -->

    <script>
        // const source = document.getElementById('source');

        // Create the canvas and get a context
        const canvas = document.querySelector('#output');
        const context = canvas.getContext('2d');


        const img = new Image();   // Create new img element
        img.addEventListener('load', main, false);
        img.src = 'img/hand1.jpg'; // Set source path


        function main() {
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;
            context.drawImage(img, 0, 0);


            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);
            const pixels = imageData.data;

            const brightness = 2; // Make the image 10% brighter
            let r, g, b, cb, cr;
            for (let i = 0; i < imageData.data.length; i += 4) {
                r = imageData.data[i];
                g = imageData.data[i + 1];
                b = imageData.data[i + 2];

                cb = 128 + r * -0.16 - g * 0.33 + b * 0.50;
                cr = 128 + r * 0.49 - g * 0.41 - b * 0.08;

                // console.log(cb, cr);

                if ((cb <= 77 || cb >= 127) || (cr <= 133 || cr >= 173)) {
                    imageData.data[i] = 255;
                    imageData.data[i + 1] = 255;
                    imageData.data[i + 2] = 255;
                }
                else {
                    imageData.data[i] = 0;
                    imageData.data[i + 1] = 0;
                    imageData.data[i + 2] = 0;
                }
            }
            // context.drawImage(img, 0, 0);
            context.putImageData(imageData, 0, 0)
        }


    </script>
</body>

</html>